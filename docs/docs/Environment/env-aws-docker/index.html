<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Docker in AWS EC2 We developed a Docker image which pre-installed all modules in this bootcamp. You can directly use it in your own environment if you have docker. This page describes how to launch an EC2 instance on AWS and run docker container within it.
Launch an AWS EC2 instance  Open the Amazon EC2 console at https://console.aws.amazon.com/ec2/ From the Amazon EC2 console dashboard, click AMIs on left sidebar. Switch Region to N."><meta property="og:title" content="" />
<meta property="og:description" content="Docker in AWS EC2 We developed a Docker image which pre-installed all modules in this bootcamp. You can directly use it in your own environment if you have docker. This page describes how to launch an EC2 instance on AWS and run docker container within it.
Launch an AWS EC2 instance  Open the Amazon EC2 console at https://console.aws.amazon.com/ec2/ From the Amazon EC2 console dashboard, click AMIs on left sidebar. Switch Region to N." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://franticnerd.github.io/bigdata-bootcamp/docs/environment/env-aws-docker/" />

<title>Env Aws Docker | GT Big Data Bootcamp</title>
<link rel="icon" href="/bigdata-bootcamp/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/bigdata-bootcamp/book.min.63eb88daa545365405ecdbb21033286a325c60a36cfa6d22d21e7c3bc9286941.css" integrity="sha256-Y&#43;uI2qVFNlQF7NuyEDMoajJcYKNs&#43;m0i0h58O8koaUE=">


<script defer src="/bigdata-bootcamp/en.search.min.893faf5011e462c05924d1cdb6f65ce2425a1693f23cd9a0bf9a1c9e26c79afd.js" integrity="sha256-iT&#43;vUBHkYsBZJNHNtvZc4kJaFpPyPNmgv5ocnibHmv0="></script>

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/bigdata-bootcamp"><span>GT Big Data Bootcamp</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  

  
  





 
  
    




  
  <ul>
    
      
        

  <li class="book-section-flat" >
    

  
  <span>Environment</span>
  


    




  
  <ul>
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/environment/env-aws-docker/" class="active">Env Aws Docker</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/environment/env-azure-docker/" class="">Env Azure Docker</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/environment/env-docker-compose/" class="">Env Docker Compose</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/environment/env-local-docker-linux/" class="">Env Local Docker Linux</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/environment/env-local-docker-macos/" class="">Env Local Docker Macos</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/environment/env-local-docker-windows/" class="">Env Local Docker Windows</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/environment/env-local-docker/" class="">Env Local Docker</a>
  

</li>
      
    
  </ul>
  



  </li>


      
    
      
        

  <li class="book-section-flat" >
    

  
  <span>Sessions</span>
  


    




  
  <ul>
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/sessions/scala-basic/" class="">Scala Basic</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/sessions/scala-intro/" class="">Scala Intro</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/sessions/spark-application/" class="">Spark Application</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/sessions/spark-basic/" class="">Spark Basic</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/sessions/spark-graphx/" class="">Spark Graphx</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/sessions/spark-mllib/" class="">Spark Mllib</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/sessions/spark-sql/" class="">Spark Sql</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/sessions/spark/" class="">Spark</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/sessions/zeppelin-intro/" class="">Zeppelin Intro</a>
  

</li>
      
    
      
        <li>

  
  <a href="/bigdata-bootcamp/docs/sessions/zeppelin-tutorial/" class="">Zeppelin Tutorial</a>
  

</li>
      
    
  </ul>
  



  </li>


      
    
  </ul>
  



  
















</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/bigdata-bootcamp/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Env Aws Docker</strong>

  <label for="toc-control">
    <img src="/bigdata-bootcamp/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#launch-an-aws-ec2-instance">Launch an AWS EC2 instance</a></li>
    <li><a href="#connect-to-the-instance">Connect to the instance</a></li>
    <li><a href="#start-a-docker-container">Start a docker container</a></li>
    <li><a href="#termination">Termination</a></li>
    <li><a href="#limitations">Limitations</a></li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="docker-in-aws-ec2">Docker in AWS EC2</h1>
<p>We developed a <a href="https://hub.docker.com/r/sunlab/bigdata/">Docker image</a> which pre-installed all modules in this bootcamp. You can directly use it in your own environment if you have docker. This page describes how to launch an EC2 instance on AWS and run docker container within it.</p>
<h2 id="launch-an-aws-ec2-instance">Launch an AWS EC2 instance</h2>
<ol>
<li>Open the Amazon EC2 console at <a href="https://console.aws.amazon.com/ec2/">https://console.aws.amazon.com/ec2/</a></li>
<li>From the Amazon EC2 console dashboard, click <strong>AMIs</strong> on left sidebar.</li>
<li>Switch <strong>Region</strong> to <em>N. Virginia</em> if you are in other regions.</li>
<li>Choose <em>Public Images</em> in dropdown below launch and search for <code>ami-59d4f433</code>.</li>
<li>Select the image and click the blue <em>Launch</em> button.</li>
<li>On the <strong>Choose an Instance Type</strong> page, select the hardware configuration and size of the instance to launch.
Choose the type <em>m4.xlarge</em>, with 4 vCPUs and 16GB memory, then click “Next: Configuration Instance Details”.</li>
<li>On the <strong>Configure Instance Details</strong> page, just keep the default settings.</li>
<li>On the <strong>Add Storage</strong> page, you can specify storage size for your disk. Use the default 30GB.</li>
<li>On the <strong>Tag Instance</strong> page, specify tags for your instance by providing key value combinations if you need.</li>
<li>On the <strong>Configure Security Group</strong> page, define firewall rules for your instance. We suggest you&rsquo;d better keep the default setting unless you are sure what you are doing.</li>
<li>On the <strong>Review Instance Launch</strong> page, check the details of your instance and click <em>Launch</em>.</li>
<li>In the <strong>Select an existing key pair or create a new key pair</strong> dialog box. If you don’t have an existing key pair, choose <strong>create a new key pair</strong>. Enter a name for the key pair (e.g. bdhKeyPair) and click “Download Key Pair”. This key pair will be used to connect to your instance. Then on the same dialog box, choose Choose an existing key pair, and select the one you just created.</li>
<li>Finally, click “Launch Instances”. You can view your instances by clicking <strong>Instances</strong> on the left navigation bar.</li>
</ol>
<h2 id="connect-to-the-instance">Connect to the instance</h2>
<p>After your instance is fully launched, you can connect to it using SSH client. Right click on the instance and click <strong>connect</strong> then AWS will show you instructions about connecting on various platform. <code>ssh</code> command will be used for <code>*nix</code> platform and Putty will be used for windows.</p>
<h2 id="start-a-docker-container">Start a docker container</h2>
<p>A pre-configured container with all necessary module installed is available for you to directly use. Navigate to <code>~/lab/docker</code> and <code>vagrant up</code> will launch a container like below</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Last login: Mon Jan <span style="color:#ae81ff">25</span> 03:29:38 <span style="color:#ae81ff">2016</span> from lawn-128-61-36-142.lawn.gatech.edu

       __|  __|_  <span style="color:#f92672">)</span>
       _|  <span style="color:#f92672">(</span>     /   Amazon Linux AMI
      ___|<span style="color:#ae81ff">\_</span>__|___|

https://aws.amazon.com/amazon-linux-ami/2015.09-release-notes/
<span style="color:#ae81ff">20</span> package<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span> needed <span style="color:#66d9ef">for</span> security, out of <span style="color:#ae81ff">38</span> available
Run <span style="color:#e6db74">&#34;sudo yum update&#34;</span> to apply all updates.
<span style="color:#f92672">[</span>ec2-user@ip-172-31-23-158 ~<span style="color:#f92672">]</span>$ cd lab/docker/
<span style="color:#f92672">[</span>ec2-user@ip-172-31-23-158 docker<span style="color:#f92672">]</span>$ vagrant up
Bringing machine <span style="color:#e6db74">&#39;bootcamp1&#39;</span> up with <span style="color:#e6db74">&#39;docker&#39;</span> provider...
<span style="color:#f92672">==</span>&gt; bootcamp1: Creating the container...
    bootcamp1:   Name: docker_bootcamp1_1453695135
    bootcamp1:  Image: sunlab/bigdata:0.04
    bootcamp1: Volume: /home/ec2-user/lab/bigdata-bootcamp:/home/ec2-user/bigdata-bootcamp
    bootcamp1: Volume: /home/ec2-user/lab/scripts:/home/ec2-user/bigdata-scripts
    bootcamp1: Volume: /home/ec2-user/lab/docker:/vagrant
    bootcamp1:
    bootcamp1: Container created: cc2f518631e86a11
<span style="color:#f92672">==</span>&gt; bootcamp1: Starting container...
<span style="color:#f92672">==</span>&gt; bootcamp1: Provisioners will not be run since container doesn<span style="color:#960050;background-color:#1e0010">&#39;</span>t support SSH.
<span style="color:#f92672">[</span>ec2-user@ip-172-31-23-158 docker<span style="color:#f92672">]</span>$ vagrant ssh
Last login: Thu Jan <span style="color:#ae81ff">21</span> 20:59:15 <span style="color:#ae81ff">2016</span> from ip-172-17-0-1.ec2.internal
<span style="color:#f92672">[</span>ec2-user@bootcamp1 ~<span style="color:#f92672">]</span>$
</code></pre></div><p>Then start all hadoop related service by</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>ec2-user@bootcamp1 ~<span style="color:#f92672">]</span>$ bigdata-scripts/start-all.sh
JMX enabled by default
Using config: /etc/zookeeper/conf/zoo.cfg
Starting zookeeper ... STARTED
starting proxyserver, logging to /var/log/hadoop-yarn/yarn-yarn-proxyserver-bootcamp.local.out
Started Hadoop proxyserver:                                <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
starting namenode, logging to /var/log/hadoop-hdfs/hadoop-hdfs-namenode-bootcamp.local.out
Started Hadoop namenode:                                   <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
starting datanode, logging to /var/log/hadoop-hdfs/hadoop-hdfs-datanode-bootcamp.local.out
Started Hadoop datanode <span style="color:#f92672">(</span>hadoop-hdfs-datanode<span style="color:#f92672">)</span>:            <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
starting resourcemanager, logging to /var/log/hadoop-yarn/yarn-yarn-resourcemanager-bootcamp.local.out
Started Hadoop resourcemanager:                            <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
starting historyserver, logging to /var/log/hadoop-mapreduce/mapred-mapred-historyserver-bootcamp.local.out
Started Hadoop historyserver:                              <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
starting nodemanager, logging to /var/log/hadoop-yarn/yarn-yarn-nodemanager-bootcamp.local.out
Started Hadoop nodemanager:                                <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
Starting Spark worker <span style="color:#f92672">(</span>spark-worker<span style="color:#f92672">)</span>:                      <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
Starting Spark master <span style="color:#f92672">(</span>spark-master<span style="color:#f92672">)</span>:                      <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
Starting Hadoop HBase regionserver daemon: starting regionserver, logging to /var/log/hbase/hbase-hbase-regionserver-bootcamp.local.out
hbase-regionserver.
starting master, logging to /var/log/hbase/hbase-hbase-master-bootcamp.local.out
Started HBase master daemon <span style="color:#f92672">(</span>hbase-master<span style="color:#f92672">)</span>:                <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
starting thrift, logging to /var/log/hbase/hbase-hbase-thrift-bootcamp.local.out
Started HBase thrift daemon <span style="color:#f92672">(</span>hbase-thrift<span style="color:#f92672">)</span>:                <span style="color:#f92672">[</span>  OK  <span style="color:#f92672">]</span>
<span style="color:#f92672">[</span>ec2-user@bootcamp1 ~<span style="color:#f92672">]</span>$
</code></pre></div><h2 id="termination">Termination</h2>
<p>You can terminate a docker by <code>vagrant destroy --force</code> in <code>~/lab/docker/</code>.</p>
<h2 id="limitations">Limitations</h2>
<p>After a docker container exit, you may loose data stored within it. You can map folder from AWS EC2 instance with Docker container for persistent data saving.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#launch-an-aws-ec2-instance">Launch an AWS EC2 instance</a></li>
    <li><a href="#connect-to-the-instance">Connect to the instance</a></li>
    <li><a href="#start-a-docker-container">Start a docker container</a></li>
    <li><a href="#termination">Termination</a></li>
    <li><a href="#limitations">Limitations</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












